
<div
    class="modal fade"
    id="attachment-modal-{{ id }}"
    tabindex="-1"
    role="dialog"
    aria-labelledby="viewAttachmentsLabel"
    aria-hidden="true"
>
    <div class="modal-dialog modal-full modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="viewAttachmentsLabel" hidden>
                    Modal title
                </h5>
                <button
                    type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
                >
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div
                    class="container-fluid"
                >
                    <div class="row attachment-container">
                        <!-- The image in focus -->
                        <div class="col text-center">
                            <img
                                src="{{attachments[0].image}}"
                                class="img-fluid"
                                alt="{{ attachments[0].heading }}"
                                id="image-in-focus"
                            />
                        </div>
                    </div>

                    <div class="row justify-content-center mt-3">
                        <h5><span id="index-in-focus">1</span> of {{ attachments | length }}</h5>
                    </div>

                    <div class="row thumbnail-container" id="available-images" data-images="{{images}}">
                        <!-- Grid of thumbnails -->
                        {% for attachment in attachments %}
                        <div
                            class="m-2"
                        >
                            <a
                                onclick="moveToImage(event, '{{loop.index}}')"
                            >
                                <img
                                    src="{{
                                        attachment.image
                                    }}"
                                    class="thumb-img"
                                    alt="{{ attachment.heading }}"
                                    id="{{id}}-{{loop.index}}"
                                />
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    moveToImage = (event, i) => {
        // let availableImages = $('#available-images').data('images').replace(/\'/g, '\"').replace(/datetime.datetime/g, '').replace(/\(/g, '[').replace(/\)/g, ']').replace(/None/g, '""');
        // availableImages = JSON.parse(availableImages);
        // const selectedImage = availableImages[i];
        $("#image-in-focus").attr('src', event.target.src);
        $('.thumb-img').removeClass('active-thumbnail');
        $('#'+event.target.id).addClass('active-thumbnail');
        $('#index-in-focus').text(i);
    }

</script>

<style>
    .active-thumbnail {
        outline: 0.5rem auto rgba(108, 108, 245, 0.918);
    }
</style>