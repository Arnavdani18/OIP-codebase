{% extends "templates/web.html" %}

{% block page_content %}
<div style='min-height: 36rem'>
    <noscript>
        <div class="text-center my-5">
            <h4>{{ _("Javascript is disabled on your browser") }}</h4>
            <p class="text-muted">
                {{ _("You need to enable JavaScript for your app to work.") }}<br>{{ _("To enable it follow the instructions in the following link: {0}").format("<a href='https://enable-javascript.com/'>enable-javascript.com</a></p>") }}
        </div>
    </noscript>
    <section class='for-login'>
        <div class="container">
            <div class="row justify-content-center align-items-center display-size">
                <div class="col-lg-4 col-md-3"></div>
                <div class="col-lg-4 col-md-3">
                    <div class="login-content">
                        <form class="form-signin form-login" role="form">
                            <h2 class="login-heading" role="heading" aria-level="1">
                                <span class="indicator blue" data-text="{{ _('Login') }}"></span>
                            </h2>
                            {%- if not disable_signup -%}
                            <p class="sign-up-message login-description mt-2">
                                Need a Social Alpha account? <a href="#signup">{{ _("Create an account") }}</a>
                            </p>
                            {%- endif -%}

                            <div class="email-input mt-4">
                                <label for="email">Email</label>
                                <input type="text" id="login_email" class="form-control"
                                    placeholder="{% if login_name_placeholder %}{{ login_name_placeholder  }}{% else %}{{ _('Email Address') }}{% endif %}"
                                    required autofocus>
                            </div>

                            <div class="password-input mt-4">
                                <div class="password-input-labels">
                                    <label for="password">Password</label>
                                    <div id="eye-container"></div>
                                </div>

                                <div class="password-field" style="position: relative;">
                                    <input type="password" id="login_password" class="form-control"
                                        placeholder="{{ _('Password') }}" required>
                                </div>
                            </div>

                            <button type="submit"
                                class="btn btn-block text-capitalize font-weight-bold mt-5 btn-primary login-button">
                                {{ _("Login") }}
                            </button>

                            {% if ldap_settings and ldap_settings.enabled %}
                            <button class="btn btn-sm btn-default btn-block btn-login btn-ldap-login">
                                {{ _("Login with LDAP") }}</button>
                            {% endif %}
                        </form>
                    </div>
                    <div class='form-footer'>

                        <div class='social-logins'>
                            {%- if social_login -%}
                            <h6>{{ _("Or login with") }}</h6>

                            <p class="text-center" style="margin-top: 15px">
                                {% for provider in provider_logins %}
                                <a href="{{ provider.auth_url }}"
                                    class="btn btn-default btn-sm btn-social btn-{{ provider.name }}">
                                    {{ provider.icon }} {{ provider.provider_name }}</a>
                                {% endfor %}
                            </p>
                            {%- endif -%}
                        </div>

                        <!-- {%- if not disable_signup -%}
                        <p class="text-center sign-up-message">
                            <a href="#signup" style="margin-top: -2px;">{{ _("Don't have an account? Sign up") }}</a>
                        </p>
                        {%- endif -%} -->

                        <p class="forgot-password-message forgot-password mt-5">
                            <a href="#forgot">{{ _("Forgot Password?") }}</a></p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-3"></div>
            </div>
        </div>
    </section>
    <section class='for-signup'>
        <h1>Signup</h1>
    </section>
    <section class='for-forgot'>
        <h1>forgot</h1>
    </section>
</div>
{% endblock %}

{% block script %}
<script>{% include "templates/includes/login/login.js" %}</script>

<script>
    // Eye for login
    new Vue({
        el: '#eye-container',
        methods: {
            isSlashed() {
                const currentText = this.$refs['eye-text'].innerText;
                if (currentText.includes('show')) {
                    this.$refs['eye-text'].innerHTML = '&nbsp;Hide'
                } else {
                    this.$refs['eye-text'].innerHTML = '&nbsp;Show'
                }
            }
        },
        template: `
        <button type="button" class="password-show" @click="isSlashed">
            <span toggle="#login_password"
                class="fa fa-fw fa-eye toggle-password text-muted d-flex">
                <span ref='eye-text'>&nbsp;Show</span>
            </span>
        </button>
    `
    })    
</script>
{% endblock %}